import{S as J,i as V,s as q,e as g,a as v,b as T,d as U,f as C,V as A,g as y,h as N,j as E,k as d,l as j,m as b,G as O,r as G,v as B,w as M,x as z,y as H,A as K}from"./index.CgXt_d39.js";import{e as S}from"./each.-gASlQSi.js";function F(t,e,a){const s=t.slice();return s[12]=e[a],s[13]=e,s[14]=a,s}function L(t){let e,a;return{c(){e=g("p"),a=z(t[2]),this.h()},l(s){e=T(s,"P",{class:!0});var n=U(e);a=H(n,t[2]),n.forEach(y),this.h()},h(){N(e,"class","error svelte-1fi3y4c")},m(t,s){E(t,e,s),d(e,a)},p(t,e){4&e&&K(a,t[2])},d(t){t&&y(e)}}}function D(t){let e,a,s,n,o,c,i,l,r,h,u="Delete";function p(){return t[7](t[12])}function f(){t[8].call(o,t[13],t[14])}function m(...e){return t[9](t[12],...e)}function k(){return t[10](t[12])}return{c(){e=g("li"),a=g("input"),n=v(),o=g("input"),c=v(),i=g("button"),i.textContent=u,l=v(),this.h()},l(t){e=T(t,"LI",{});var s=U(e);a=T(s,"INPUT",{type:!0}),n=C(s),o=T(s,"INPUT",{type:!0}),c=C(s),i=T(s,"BUTTON",{"data-svelte-h":!0}),"svelte-1otente"!==A(i)&&(i.textContent=u),l=C(s),s.forEach(y),this.h()},h(){N(a,"type","checkbox"),a.checked=s=t[12].isCompleted,N(o,"type","text")},m(s,u){E(s,e,u),d(e,a),d(e,n),d(e,o),j(o,t[12].text),d(e,c),d(e,i),d(e,l),r||(h=[b(a,"change",p),b(o,"input",f),b(o,"change",m),b(i,"click",k)],r=!0)},p(e,n){t=e,1&n&&s!==(s=t[12].isCompleted)&&(a.checked=s),1&n&&o.value!==t[12].text&&j(o,t[12].text)},d(t){t&&y(e),r=!1,B(h)}}}function Q(t){let e,a,s,n,o,c,i,l,r,h="Add Task",u=t[2]&&L(t),p=S(t[0]),f=[];for(let e=0;e<p.length;e+=1)f[e]=D(F(t,p,e));return{c(){e=g("div"),a=g("input"),s=v(),n=g("button"),n.textContent=h,o=v(),u&&u.c(),c=v(),i=g("ul");for(let t=0;t<f.length;t+=1)f[t].c();this.h()},l(t){e=T(t,"DIV",{});var l=U(e);a=T(l,"INPUT",{type:!0,placeholder:!0}),s=C(l),n=T(l,"BUTTON",{"data-svelte-h":!0}),"svelte-amj354"!==A(n)&&(n.textContent=h),o=C(l),u&&u.l(l),l.forEach(y),c=C(t),i=T(t,"UL",{});var r=U(i);for(let t=0;t<f.length;t+=1)f[t].l(r);r.forEach(y),this.h()},h(){N(a,"type","text"),N(a,"placeholder","New task")},m(h,p){E(h,e,p),d(e,a),j(a,t[1]),d(e,s),d(e,n),d(e,o),u&&u.m(e,null),E(h,c,p),E(h,i,p);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(i,null);l||(r=[b(a,"input",t[6]),b(n,"click",t[3])],l=!0)},p(t,[s]){if(2&s&&a.value!==t[1]&&j(a,t[1]),t[2]?u?u.p(t,s):(u=L(t),u.c(),u.m(e,null)):u&&(u.d(1),u=null),49&s){let e;for(p=S(t[0]),e=0;e<p.length;e+=1){const a=F(t,p,e);f[e]?f[e].p(a,s):(f[e]=D(a),f[e].c(),f[e].m(i,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=p.length}},i:O,o:O,d(t){t&&(y(e),y(c),y(i)),u&&u.d(),G(f,t),l=!1,B(r)}}}function R(t,e,a){let s=[],n="",o=null;const c=async(t,e,n)=>{try{if(!(await fetch(`http://toycube.com.au/api/tasks/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,isCompleted:n})})).ok)throw new Error("Failed to update task");a(0,s=s.map((a=>a.id===t?{...a,text:e,isCompleted:n}:a)))}catch(t){a(2,o=t.message)}},i=async t=>{try{if(!(await fetch(`http://toycube.com.au/api/tasks/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete task");a(0,s=s.filter((e=>e.id!==t)))}catch(t){a(2,o=t.message)}};M((async()=>{try{const t=await fetch("http://toycube.com.au/api/tasks");if(!t.ok)throw new Error("Failed to fetch tasks");a(0,s=await t.json())}catch(t){a(2,o=t.message)}}));return[s,n,o,async()=>{if(""!==n.trim())try{const t=await fetch("http://toycube.com.au/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n})});if(!t.ok)throw new Error("Failed to add task");const e=await t.json();a(0,s=[...s,e]),a(1,n="")}catch(t){a(2,o=t.message)}},c,i,function(){n=this.value,a(1,n)},t=>c(t.id,t.text,!t.isCompleted),function(t,e){t[e].text=this.value,a(0,s)},(t,e)=>c(t.id,e.target.value,t.isCompleted),t=>i(t.id)]}class Z extends J{constructor(t){super(),V(this,t,R,Q,q,{})}}export{Z as default};